{"version":3,"file":"Drag.js","sourceRoot":"","sources":["../../src/plugins/Drag.ts"],"names":[],"mappings":"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","sourcesContent":["import { Point } from '@pixi/core';\nimport { Plugin } from './Plugin';\n\nimport type { Decelerate } from './Decelerate';\nimport type { FederatedPointerEvent } from '@pixi/events';\nimport type { IPointData } from '@pixi/core';\nimport type { Viewport } from '../Viewport';\n\n/** Options for {@link Drag}. */\nexport interface IDragOptions\n{\n    /**\n     * direction to drag\n     *\n     * @default \"all\"\n     */\n    direction?: string;\n\n    /**\n     * whether click to drag is active\n     *\n     * @default true\n     */\n    pressDrag?: boolean;\n\n    /**\n     * Use wheel to scroll in direction (unless wheel plugin is active)\n     *\n     * @default true\n     */\n    wheel?: boolean;\n\n    /**\n     * number of pixels to scroll with each wheel spin\n     *\n     * @default 1\n     */\n    wheelScroll?: number;\n\n    /**\n     * reverse the direction of the wheel scroll\n     *\n     * @default false\n     */\n    reverse?: boolean;\n\n    /**\n     * clamp wheel(to avoid weird bounce with mouse wheel). Can be 'x' or 'y' or `true`.\n     *\n     * @default false\n     */\n    clampWheel?: boolean | string;\n\n    /**\n     * where to place world if too small for screen\n     *\n     * @default \"center\"\n     */\n    underflow?: string;\n\n    /**\n     * factor to multiply drag to increase the speed of movement\n     *\n     * @default 1\n     */\n    factor?: number;\n\n    /**\n     * Changes which mouse buttons trigger drag.\n     *\n     * Use: 'all', 'left', right' 'middle', or some combination, like, 'middle-right'; you may want to set\n     * `viewport.options.disableOnContextMenu` if you want to use right-click dragging.\n     *\n     * @default \"all\"\n     */\n    mouseButtons?: 'all' | string;\n\n    /**\n     * Array containing {@link key|https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code} codes of\n     * keys that can be pressed for the drag to be triggered, e.g.: ['ShiftLeft', 'ShiftRight'}.\n     *\n     * @default null\n     */\n    keyToPress?: string[] | null;\n\n    /**\n     * Ignore keyToPress for touch events.\n     *\n     * @default false\n     */\n    ignoreKeyToPressOnTouch?: boolean;\n\n    /**\n     * Scaling factor for non-DOM_DELTA_PIXEL scrolling events.\n     *\n     * @default 20\n     */\n    lineHeight?: number;\n\n    /**\n     * Swap x and y axes when scrolling.\n     *\n     * @default false\n     */\n    wheelSwapAxes?: boolean;\n}\n\nconst DEFAULT_DRAG_OPTIONS: Required<IDragOptions> = {\n    direction: 'all',\n    pressDrag: true,\n    wheel: true,\n    wheelScroll: 1,\n    reverse: false,\n    clampWheel: false,\n    underflow: 'center',\n    factor: 1,\n    mouseButtons: 'all',\n    keyToPress: null,\n    ignoreKeyToPressOnTouch: false,\n    lineHeight: 20,\n    wheelSwapAxes: false,\n};\n\n/**\n * Plugin to enable panning/dragging of the viewport to move around.\n *\n * @public\n */\nexport class Drag extends Plugin\n{\n    /** Options used to initialize this plugin, cannot be modified later. */\n    public readonly options: Readonly<Required<IDragOptions>>;\n\n    /** Flags when viewport is moving. */\n    protected moved: boolean;\n\n    /** Factor to apply from {@link IDecelerateOptions}'s reverse. */\n    protected reverse: 1 | -1;\n\n    /** Holds whether dragging is enabled along the x-axis. */\n    protected xDirection: boolean;\n\n    /** Holds whether dragging is enabled along the y-axis. */\n    protected yDirection: boolean;\n\n    /** Flags whether the keys required to drag are pressed currently. */\n    protected keyIsPressed: boolean;\n\n    /** Holds whether the left, center, and right buttons are required to pan. */\n    protected mouse!: [boolean, boolean, boolean];\n\n    /** Underflow factor along x-axis */\n    protected underflowX!: -1 | 0 | 1;\n\n    /** Underflow factor along y-axis */\n    protected underflowY!: -1 | 0 | 1;\n\n    /** Last pointer position while panning. */\n    protected last?: IPointData | null;\n\n    /** The ID of the pointer currently panning the viewport. */\n    protected current?: number;\n\n    /** Array of event-handlers for window */\n    private windowEventHandlers: Array<{event: string, handler: (e: any) => void}> = [];\n\n    /**\n     * This is called by {@link Viewport.drag}.\n     */\n    constructor(parent: Viewport, options = {})\n    {\n        super(parent);\n\n        this.options = Object.assign({}, DEFAULT_DRAG_OPTIONS, options);\n        this.moved = false;\n        this.reverse = this.options.reverse ? 1 : -1;\n        this.xDirection = !this.options.direction || this.options.direction === 'all' || this.options.direction === 'x';\n        this.yDirection = !this.options.direction || this.options.direction === 'all' || this.options.direction === 'y';\n        this.keyIsPressed = false;\n\n        this.parseUnderflow();\n        this.mouseButtons(this.options.mouseButtons);\n\n        if (this.options.keyToPress)\n        {\n            this.handleKeyPresses(this.options.keyToPress);\n        }\n    }\n\n    /**\n     * Handles keypress events and set the keyIsPressed boolean accordingly\n     *\n     * @param {array} codes - key codes that can be used to trigger drag event\n     */\n    protected handleKeyPresses(codes: string[]): void\n    {\n        const keydownHandler = (e: KeyboardEvent) =>\n        {\n            if (codes.includes(e.code))\n            { this.keyIsPressed = true; }\n        };\n\n        const keyupHandler = (e: KeyboardEvent) =>\n        {\n            if (codes.includes(e.code))\n            { this.keyIsPressed = false; }\n        };\n\n        this.addWindowEventHandler('keyup', keyupHandler);\n        this.addWindowEventHandler('keydown', keydownHandler);\n    }\n\n    private addWindowEventHandler(event: string, handler: (e: any) => void): void\n    {\n        window.addEventListener(event, handler);\n        this.windowEventHandlers.push({ event, handler });\n    }\n\n    public override destroy(): void\n    {\n        this.windowEventHandlers.forEach(({ event, handler }) =>\n        {\n            window.removeEventListener(event, handler);\n        });\n    }\n\n    /**\n     * initialize mousebuttons array\n     * @param {string} buttons\n     */\n    protected mouseButtons(buttons: string): void\n    {\n        if (!buttons || buttons === 'all')\n        {\n            this.mouse = [true, true, true];\n        }\n        else\n        {\n            this.mouse = [\n                buttons.indexOf('left') !== -1,\n                buttons.indexOf('middle') !== -1,\n                buttons.indexOf('right') !== -1\n            ];\n        }\n    }\n\n    protected parseUnderflow(): void\n    {\n        const clamp = this.options.underflow.toLowerCase();\n\n        if (clamp === 'center')\n        {\n            this.underflowX = 0;\n            this.underflowY = 0;\n        }\n        else\n        {\n            if (clamp.includes('left'))\n            {\n                this.underflowX = -1;\n            }\n            else if (clamp.includes('right'))\n            {\n                this.underflowX = 1;\n            }\n            else\n            {\n                this.underflowX = 0;\n            }\n            if (clamp.includes('top'))\n            {\n                this.underflowY = -1;\n            }\n            else if (clamp.includes('bottom'))\n            {\n                this.underflowY = 1;\n            }\n            else\n            {\n                this.underflowY = 0;\n            }\n        }\n    }\n\n    /**\n     * @param {PIXI.FederatedPointerEvent} event\n     * @returns {boolean}\n     */\n    protected checkButtons(event: FederatedPointerEvent): boolean\n    {\n        const isMouse = event.pointerType === 'mouse';\n        const count = this.parent.input.count();\n\n        if ((count === 1) || (count > 1 && !this.parent.plugins.get('pinch', true)))\n        {\n            if (!isMouse || this.mouse[event.button])\n            {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * @param {PIXI.FederatedPointerEvent} event\n     * @returns {boolean}\n     */\n    protected checkKeyPress(event: FederatedPointerEvent): boolean\n    {\n        return (!this.options.keyToPress\n            || this.keyIsPressed\n            || (this.options.ignoreKeyToPressOnTouch && event.data.pointerType === 'touch'));\n    }\n\n    public down(event: FederatedPointerEvent): boolean\n    {\n        if (this.paused || !this.options.pressDrag)\n        {\n            return false;\n        }\n        if (this.checkButtons(event) && this.checkKeyPress(event))\n        {\n            this.last = { x: event.global.x, y: event.global.y };\n            this.current = event.pointerId;\n\n            return true;\n        }\n        this.last = null;\n\n        return false;\n    }\n\n    get active(): boolean\n    {\n        return this.moved;\n    }\n\n    public move(event: FederatedPointerEvent): boolean\n    {\n        if (this.paused || !this.options.pressDrag)\n        {\n            return false;\n        }\n        if (this.last && this.current === event.data.pointerId)\n        {\n            const x = event.global.x;\n            const y = event.global.y;\n            const count = this.parent.input.count();\n\n            if (count === 1 || (count > 1 && !this.parent.plugins.get('pinch', true)))\n            {\n                const distX = x - this.last.x;\n                const distY = y - this.last.y;\n\n                if (this.moved\n                    || ((this.xDirection && this.parent.input.checkThreshold(distX))\n                    || (this.yDirection && this.parent.input.checkThreshold(distY))))\n                {\n                    const newPoint = { x, y };\n\n                    if (this.xDirection)\n                    {\n                        this.parent.x += (newPoint.x - this.last.x) * this.options.factor;\n                    }\n                    if (this.yDirection)\n                    {\n                        this.parent.y += (newPoint.y - this.last.y) * this.options.factor;\n                    }\n                    this.last = newPoint;\n                    if (!this.moved)\n                    {\n                        this.parent.emit('drag-start', {\n                            event,\n                            screen: new Point(this.last.x, this.last.y),\n                            world: this.parent.toWorld(new Point(this.last.x, this.last.y)),\n                            viewport: this.parent\n                        });\n                    }\n                    this.moved = true;\n                    this.parent.emit('moved', { viewport: this.parent, type: 'drag' });\n\n                    return true;\n                }\n            }\n            else\n            {\n                this.moved = false;\n            }\n        }\n\n        return false;\n    }\n\n    public up(event: FederatedPointerEvent): boolean\n    {\n        if (this.paused)\n        {\n            return false;\n        }\n\n        const touches = this.parent.input.touches;\n\n        if (touches.length === 1)\n        {\n            const pointer = touches[0];\n\n            if (pointer.last)\n            {\n                this.last = { x: pointer.last.x, y: pointer.last.y };\n                this.current = pointer.id;\n            }\n            this.moved = false;\n\n            return true;\n        }\n        else if (this.last)\n        {\n            if (this.moved)\n            {\n                const screen = new Point(this.last.x, this.last.y);\n\n                this.parent.emit('drag-end', {\n                    event, screen,\n                    world: this.parent.toWorld(screen),\n                    viewport: this.parent,\n                });\n                this.last = null;\n                this.moved = false;\n\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    public wheel(event: WheelEvent): boolean\n    {\n        if (this.paused)\n        {\n            return false;\n        }\n\n        if (this.options.wheel)\n        {\n            const wheel = this.parent.plugins.get('wheel', true);\n\n            if (!wheel || (!wheel.options.wheelZoom && !event.ctrlKey))\n            {\n                const step = event.deltaMode ? this.options.lineHeight : 1;\n\n                const deltas = [event.deltaX, event.deltaY];\n                const [deltaX, deltaY] = this.options.wheelSwapAxes ? deltas.reverse() : deltas;\n\n                if (this.xDirection)\n                {\n                    this.parent.x += deltaX * step * this.options.wheelScroll * this.reverse;\n                }\n                if (this.yDirection)\n                {\n                    this.parent.y += deltaY * step * this.options.wheelScroll * this.reverse;\n                }\n                if (this.options.clampWheel)\n                {\n                    this.clamp();\n                }\n                this.parent.emit('wheel-scroll', this.parent);\n                this.parent.emit('moved', { viewport: this.parent, type: 'wheel' });\n                if (!this.parent.options.passiveWheel)\n                {\n                    event.preventDefault();\n                }\n                if (this.parent.options.stopPropagation)\n                {\n                    event.stopPropagation();\n                }\n\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    public resume(): void\n    {\n        this.last = null;\n        this.paused = false;\n    }\n\n    public clamp(): void\n    {\n        const decelerate: Partial<Decelerate> = this.parent.plugins.get('decelerate', true) || {};\n\n        if (this.options.clampWheel !== 'y')\n        {\n            if (this.parent.screenWorldWidth < this.parent.screenWidth)\n            {\n                switch (this.underflowX)\n                {\n                    case -1:\n                        this.parent.x = 0;\n                        break;\n                    case 1:\n                        this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth);\n                        break;\n                    default:\n                        this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth) / 2;\n                }\n            }\n            else\n            if (this.parent.left < 0)\n            {\n                this.parent.x = 0;\n                decelerate.x = 0;\n            }\n            else if (this.parent.right > this.parent.worldWidth)\n            {\n                this.parent.x = (-this.parent.worldWidth * this.parent.scale.x) + this.parent.screenWidth;\n                decelerate.x = 0;\n            }\n        }\n        if (this.options.clampWheel !== 'x')\n        {\n            if (this.parent.screenWorldHeight < this.parent.screenHeight)\n            {\n                switch (this.underflowY)\n                {\n                    case -1:\n                        this.parent.y = 0;\n                        break;\n                    case 1:\n                        this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight);\n                        break;\n                    default:\n                        this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight) / 2;\n                }\n            }\n            else\n            {\n                if (this.parent.top < 0)\n                {\n                    this.parent.y = 0;\n                    decelerate.y = 0;\n                }\n                if (this.parent.bottom > this.parent.worldHeight)\n                {\n                    this.parent.y = (-this.parent.worldHeight * this.parent.scale.y) + this.parent.screenHeight;\n                    decelerate.y = 0;\n                }\n            }\n        }\n    }\n}\n"]}